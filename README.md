# Traffic Sniff - å®æ—¶æµé‡ç›‘æ§å·¥å…·

åŸºäº Go åç«¯ + Vue.js å‰ç«¯çš„å®æ—¶ç½‘ç»œæµé‡ç›‘æ§å·¥å…·ï¼Œæä¾› Web ç•Œé¢å®æ—¶ç›‘æ§ Linux æœåŠ¡å™¨æµé‡ã€‚

## åŠŸèƒ½ç‰¹æ€§

- ğŸš€ **å®æ—¶æµé‡ç›‘æ§**: å±•ç¤ºç½‘ç»œæ¥å£å®æ—¶æ”¶å‘æµé‡ï¼ˆbps/ppsï¼‰
- ğŸ“Š **è¿æ¥è¯¦æƒ…**: æŸ¥çœ‹æºIPã€ç›®æ ‡IPã€ç«¯å£ã€åè®®å’Œå½“å‰é€Ÿç‡
- ğŸ” **çµæ´»è¿‡æ»¤**: æ”¯æŒæŒ‰IP/ç«¯å£/åè®®è¿›è¡Œè¿‡æ»¤æŸ¥è¯¢
- ğŸ“ˆ **å†å²ç»Ÿè®¡**: æŸ¥çœ‹å†å²æµé‡è¶‹åŠ¿å›¾è¡¨
- ğŸ”„ **è‡ªåŠ¨åˆ·æ–°**: æ¯ç§’è‡ªåŠ¨æ›´æ–°æ•°æ®
- ğŸŒ **WebSocket**: å®æ—¶æ¨é€æ•°æ®æ›´æ–°
- ğŸ”€ **åŠ¨æ€åˆ‡æ¢æ¥å£**: æ— éœ€é‡å¯å³å¯åˆ‡æ¢ç›‘å¬çš„ç½‘ç»œæ¥å£

## æŠ€æœ¯æ ˆ

- **åç«¯**: Go + gopacket + Gorilla WebSocket
- **å‰ç«¯**: Vue 3 + Vite + ECharts
- **é€šä¿¡**: RESTful API + WebSocket

## å¿«é€Ÿå¼€å§‹

### å‰ç½®è¦æ±‚

- Go 1.19+
- Node.js 18+
- libpcap (Linux/macOS) æˆ– WinPcap/Npcap (Windows)
- ç®¡ç†å‘˜æƒé™ï¼ˆç”¨äºç½‘ç»œåŒ…æ•è·ï¼‰

### å®‰è£… libpcap

**macOS:**
```bash
brew install libpcap
```

**Ubuntu/Debian:**
```bash
sudo apt-get install libpcap-dev
```

**CentOS/RHEL:**
```bash
sudo yum install libpcap-devel
```

### è¿è¡Œåç«¯

```bash
# è¿›å…¥åç«¯ç›®å½•
cd backend

# å®‰è£…ä¾èµ–
go mod download

# è¿è¡ŒæœåŠ¡å™¨ï¼ˆéœ€è¦ç®¡ç†å‘˜æƒé™ï¼‰
sudo go run cmd/server/main.go -port 8088

# æˆ–æŒ‡å®šç½‘ç»œæ¥å£
sudo go run cmd/server/main.go -interface eth0 -port 8088

# å…¶ä»–é€‰é¡¹
# -port 8088       # æœåŠ¡å™¨ç«¯å£ï¼ˆé»˜è®¤: 8080ï¼Œå»ºè®®ä½¿ç”¨ 8088 é¿å…å†²çªï¼‰
# -storage ./data  # å†å²æ•°æ®å­˜å‚¨è·¯å¾„ï¼ˆé»˜è®¤: ./dataï¼‰
```

### è¿è¡Œå‰ç«¯

```bash
# è¿›å…¥å‰ç«¯ç›®å½•
cd frontend

# å®‰è£…ä¾èµ–
npm install

# è¿è¡Œå¼€å‘æœåŠ¡å™¨
npm run dev

# æ„å»ºç”Ÿäº§ç‰ˆæœ¬
npm run build
```

è®¿é—® http://localhost:5173 æŸ¥çœ‹ç•Œé¢

## é¡¹ç›®ç»“æ„

```
traffic-sniff/
â”œâ”€â”€ backend/                    # Go åç«¯
â”‚   â”œâ”€â”€ cmd/server/            # ä¸»ç¨‹åºå…¥å£
â”‚   â”œâ”€â”€ internal/              # å†…éƒ¨åŒ…
â”‚   â”‚   â”œâ”€â”€ capture/           # ç½‘ç»œåŒ…æ•è·
â”‚   â”‚   â”œâ”€â”€ handlers/          # HTTP/WebSocketå¤„ç†å™¨
â”‚   â”‚   â”œâ”€â”€ models/            # æ•°æ®æ¨¡å‹
â”‚   â”‚   â””â”€â”€ storage/           # æ•°æ®å­˜å‚¨
â”‚   â””â”€â”€ go.mod                 # Go ä¾èµ–ç®¡ç†
â”œâ”€â”€ frontend/                   # Vue å‰ç«¯
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ components/        # Vue ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ App.vue           # ä¸»åº”ç”¨ç»„ä»¶
â”‚   â”‚   â””â”€â”€ main.js           # å…¥å£æ–‡ä»¶
â”‚   â””â”€â”€ package.json          # npm ä¾èµ–ç®¡ç†
â””â”€â”€ PRD.md                    # äº§å“éœ€æ±‚æ–‡æ¡£
```

## API æ¥å£

- `GET /api/traffic/realtime` - è·å–å®æ—¶æµé‡ç»Ÿè®¡
- `GET /api/traffic/connections` - è·å–è¿æ¥åˆ—è¡¨ï¼ˆæ”¯æŒè¿‡æ»¤ï¼‰
- `GET /api/traffic/history` - è·å–å†å²æµé‡æ•°æ®
- `WS /ws` - WebSocket å®æ—¶æ•°æ®æ¨é€

## æ³¨æ„äº‹é¡¹

1. åç«¯éœ€è¦ç®¡ç†å‘˜æƒé™æ¥æ•è·ç½‘ç»œåŒ…
2. ç¡®ä¿é˜²ç«å¢™å…è®¸å‰åç«¯é€šä¿¡ç«¯å£
3. å¤§æµé‡ç¯å¢ƒä¸‹å»ºè®®è°ƒæ•´é‡‡æ ·ç‡ä»¥é™ä½æ€§èƒ½å¼€é”€

## License

MIT